<p align="center">
  <img src="./docs/cover.png" alt="Dinamiques" />
  <hr>
  <h1 align="center">Dinamiques: conhecimento ao alcance de todos</h1>
</p>

<p align="center">
  <img src="https://img.shields.io/github/repo-size/felipe-dr/dinamiques-web-next?style=for-the-badge&color=4e5acf" alt="Repo size" />
  <a aria-label="Last Commit" href="https://github.com/felipe-dr/dinamiques-web-next/commits/main">
    <img src="https://img.shields.io/github/last-commit/felipe-dr/dinamiques-web-next?style=for-the-badge&color=4e5acf" alt="Last commit on GitHub" />
  </a>
  <!-- <img src="https://img.shields.io/badge/license-MIT-4e5acf?style=for-the-badge" alt="License" /> -->
  <img src="https://img.shields.io/badge/status-conclu√≠do-green?style=for-the-badge" alt="Status" />
</p>

<br>

<p align="center">
  <a target="_blank" href="https://www.docker.com/">
    <img src="https://img.shields.io/static/v1?style=plastic&color=orange&label=Docker&message=Build&logo=docker" alt="Docker" />
  </a>
  <a target="_blank" href="https://docs.github.com/pt/actions">
    <img src="https://img.shields.io/static/v1?style=plastic&color=orange&label=CI/CD&message=Build&logo=githubactions" alt="CI/CD: GitHub Actions" />
  </a>
  <a target="_blank" href="https://commitlint.js.org/">
    <img src="https://img.shields.io/static/v1?style=plastic&color=orange&label=CommitLint&message=Build" alt="CommitLint" />
  </a>
  <a target="_blank" href="https://github.com/lint-staged/lint-staged">
    <img src="https://img.shields.io/static/v1?style=plastic&color=orange&l&label=LintStaged&message=Build" alt="LintStaged" />
  </a>
  <a target="_blank" href="https://typicode.github.io/husky/">
    <img src="https://img.shields.io/static/v1?style=plastic&color=orange&l&label=Husky&message=Build" alt="Husky" />
  </a>
</p>
<p align="center">
  <a target="_blank" href="https://nextjs.org/">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&label=Nextjs&message=TS&logo=Next.js" alt="Next.js" />
  </a>
  <a target="_blank" href="https://react.dev/">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&label=Reactjs&message=TS&logo=React" alt="React.js" />
  </a>
  <a target="_blank" href="https://www.typescriptlang.org/">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&label=Typescript&message=TS&logo=typescript" alt="Typescript.org" />
  </a>
  <a target="_blank" href="https://react-hook-form.com/">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&label=ReactHookForm&message=TS&logo=ReactHookForm" alt="ReactHookForm" />
  </a>
  <a target="_blank" href="https://github.com/remarkjs/react-markdown">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&label=ReactMarkDown&message=TS&" alt="ReactMarkDown" />
  </a>
  <a target="_blank" href="https://omgovich.github.io/react-colorful/">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&label=ReactColorFul&message=TS" alt="ReactColorFul" />
  </a>
  <a target="_blank" href="https://cva.style/docs">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&label=ClassVarianceAuthority&message=TS" alt="ClassVarianceAuthority" />
  </a>
  <a target="_blank" href="https://uiwjs.github.io/npm-unpkg/#/pkg/@uiw/react-md-editor/file/README.md">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&label=UIWReactMdEditor&message=TS&logo=UIWReactMdEditor" alt="UIWReactMdEditor" />
  </a>
  <a target="_blank" href="https://tailwindcss.com/">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&label=Tailwind&message=TS&logo=Tailwindcss" alt="Tailwind" />
  </a>
  <a target="_blank" href="https://www.npmjs.com/package/clsx">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&label=CLSX&message=TS" alt="CLSX" />
  </a>
  <a target="_blank" href="https://www.radix-ui.com/">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&label=RadixUI&message=TS&logo=Radixui" alt="RadixUI" />
  </a>
  <a target="_blank" href="https://tanstack.com/">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&label=Tanstack&message=TS" alt="Tanstack" />
  </a>
  <a target="_blank" href="https://date-fns.org/">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&label=DateFns&message=TS&logo=DAteFns" alt="DateFns" />
  </a>
  <a target="_blank" href="https://zod.dev/">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&label=Zod&message=TS&logo=Zod" alt="Zod" />
  </a>
  <a target="_blank" href="https://heroicons.com/">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&label=Heroicons&message=TS" alt="Heroicons" />
  </a>
  <a target="_blank" href="https://jwt.io">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&label=JWT&message=TS&" alt="JWT.io" />
  </a>
  <a target="_blank" href="https://eslint.org/">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&logoColor=red&label=ESLint&message=JS&logo=eslint" alt="Eslint.org" />
  </a>
  <a target="_blank" href="https://prettier.io/">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&l&label=Prettier&message=TS&logo=prettier" alt="Prettier.io" />
  </a>
  <a target="_blank" href="https://vitest.dev/">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&label=Vitest&message=TS&logo=Vitest" alt="Vitest" />
  </a>
  <a target="_blank" href="https://testing-library.com/">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&label=TestingLibrary&message=TS&logo=TestingLibrary" alt="TestingLibrary" />
  </a>
  <a target="_blank" href="https://github.com/jsdom/jsdom">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&label=JSdom&message=TS" alt="JSdom" />
  </a>
  <a target="_blank" href="https://postcss.org/">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&logoColor=red&label=PostCSS&message=TS&logo=PostCSS" alt="PostCSS" />
  </a>
  <a target="_blank" href="https://chromewebstore.google.com/detail/lighthouse/blipmdconlkpinefehnmjammfjpmpbjk?hl=pt-br">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&label=Google Lighthouse&message= &logo=Lighthouse" alt="GoogleLighthouse" />
  </a>
  <a target="_blank" href="https://search.google.com/test/rich-results?hl=pt-BR">
    <img src="https://img.shields.io/static/v1?style=plastic&color=blue&label=GoogleRichResultsTest&message= &logo=GoogleSearchConsole" alt="GoogleRichResultsTest" />
  </a>
</p>

## √çndice

<ol>
  <li><a href="#sobre">Sobre</a></li>
  <li><a href="#funcionalidades">Funcionalidades</a></li>
  <li><a href="#arquitetura">Arquitetura</a></li>
  <li><a href="#cicd">CI/CD</a></li>
  <li><a href="#como-executar">Como executar</a></li>
  <li><a href="#tecnologias">Tecnologias</a></li>
  <li><a href="#autor">Autor</a></li>
</ol>

## Sobre

Blog desenvolvido em NextJS que disponibiliza o acesso e leitura de artigos acad√™micos.

## Funcionalidades

> **IMPORTANTE !**
>
> - Nessa primeira vers√£o n√£o foi implementado o conceito de _roles_ para restringir acessos e definir permiss√µes, por√©m posteriormente ser√° implementado.
> - Os itens abaixo sem a marca√ß√£o de checado s√£o recursos que est√£o mapeados para serem implementados posteriormente.

- [x] **Usu√°rio poder√° se autenticar quando estiver com o status ativo**

- [ ] **Usu√°rio autenticado como administrador poder√° gerenciar:**

  > Todas as funcionalidades abaixo est√£o implementadas na API e ser√£o integradas futuramente na interface.

  - **Usu√°rios**
    - [ ] Criar
      - [ ] Com restri√ß√£o de `email` e `username` √∫nicos
    - [ ] Consultar todos
      - [ ] Com pagina√ß√£o e limite de itens
      - [ ] Ordenar por padr√£o em ordem decrescente de cria√ß√£o
      - [ ] Adicionar filtro para ordena√ß√£o
    - [ ] Consultar por id
    - [ ] Consultar por email
    - [ ] Editar
      - [ ] Com restri√ß√£o de `email` e `username` √∫nicos
    - [ ] Deletar
      - [ ] Do tipo `soft delete` para se manter hist√≥rico
      - [ ] N√£o √© poss√≠vel deletar ( desativar ) um usu√°rio j√° desativado
  - **Docentes**
    - [ ] Criar
      - [ ] Com restri√ß√£o de `nome` √∫nico
    - [ ] Consultar todos
      - [ ] Com pagina√ß√£o e limite de itens
      - [ ] Ordenar por padr√£o em ordem decrescente de cria√ß√£o
      - [ ] Adicionar filtro para ordena√ß√£o
    - [ ] Consultar por id
    - [ ] Consultar por nome
    - [ ] Editar
      - [ ] Com restri√ß√£o de `nome` √∫nico
    - [ ] Deletar
      - [ ] √â feita automaticamente a desativa√ß√£o do seu usu√°rio correspondente

- [x] **Usu√°rio autenticado como docente poder√° gerenciar:**

  - **Categorias**
    - [x] Criar
      - [x] Com restri√ß√£o de `nome` √∫nico
    - [x] Consultar todas
      - [x] Com pagina√ß√£o e limite de itens
      - [x] Ordenar por padr√£o em ordem decrescente de cria√ß√£o
      - [x] Ordenar por nome, ativo e criado em
    - [x] Visualizar detalhes
    - [x] Filtrar por nome
    - [x] Adicionar ou remover a exibi√ß√£o de colunas da tabela
    - [x] Editar
      - [x] Com restri√ß√£o de `nome` √∫nico
    - [x] Deletar
      - [x] Com restri√ß√£o de somente se n√£o estiver associada em artigo(s)
  - **Artigos**
    - [x] Criar
      - [x] Com restri√ß√£o de `t√≠tulo` e `slug` √∫nicos
    - [x] Consultar todos
      - [x] Com pagina√ß√£o e limite de itens
      - [x] Ordenar por padr√£o em ordem decrescente de data da √∫ltima publica√ß√£o
      - [x] Ordernar por categoria, docente, t√≠tulo, data da √∫ltima publica√ß√£o, publicado e criado em
    - [x] Visualizar detalhes do artigo concatenando com dados do docente e categoria
    - [x] Filtrar por t√≠tulo
    - [x] Adicionar ou remover a exibi√ß√£o de colunas da tabela
    - [x] Editar
      - [x] Com restri√ß√£o de `t√≠tulo` e `slug` √∫nicos
    - [x] Deletar

- [x] **Usu√°rio visitante n√£o estritamente autenticado poder√° acessar:**

  - **P√°gina inicial**
    - [x] Consultar artigos
      - [ ] Com pagina√ß√£o e limite de itens
    - [x] Filtrar artigos por categoria ativa
    - [x] Filtrar artigos por t√≠tulo ou conte√∫do na barra de pesquisa
  - **P√°gina de detalhes do artigo**
    - [x] Visualizar detalhes do artigo
    - [x] Visualizar e acessar artigos ativos recomendados de mesma categoria
    - [ ] Compartilhar artigo nas principais redes sociais
    - [ ] Publicar um coment√°rio no artigo
  - [ ] Favoritar artigo para leitura quando houver sido implementado o conceito de _roles_ e autentica√ß√£o de visitante
  - [ ] Alternar entre tema claro e escuro
  - [ ] Alterar idioma
  - [ ] Alterar tamanho da fonte

## Arquitetura

O projeto foi desenvolvido seguindo diversas boas pr√°ticas e princ√≠pios arquiteturais para que se mantenha robusto e escal√°vel para novas implementa√ß√µes. Futuramente poder√° ser ainda mais aprimorado e aplicado DDD como foi feito na API.

- Clean code
- DRY ( Dont Repeat Yourself )

A estrutura de pastas √© sem√¢ntica e os arquivos est√£o devidamente categorizados de acordo com suas finalidades.

![Estrutura de pastas do projeto Dinamiques](docs/dinamiques-folder-structure.png)

## CI/CD

Embora esteja sendo utilizado o `husky` com o `lintstaged` para j√° validar o arquivo tanto em sua estrutura de c√≥digo, quanto na valida√ß√£o dos testes ap√≥s cada `push`. H√° ainda um `workflow` configurado com o `github actions` respons√°vel por efetuar os fluxos abaixo, assim como executar os devidos `scripts` definidos em `package.json` com o sufixo `ci`.

- **Integra√ß√£o cont√≠nua**
  - Valida√ß√£o de testes **unit√°rios** a cada `push` e em qualquer `branch`
  - Valida√ß√£o de testes de **integra√ß√£o** e de **e2e** em cada `pull request` **( Em breve )**
- **Entrega cont√≠nua ( Em breve )**
  - Ap√≥s ser efetuado um `push` na `branch main` e j√° ter sido executado todo o fluxo de integra√ß√£o cont√≠nua, ser√° feito o `build` pr√©vio da aplica√ß√£o e disponibilizada a imagem no `dockerhub`.

> **DICA !**
>
> Para mais detalhes das configura√ß√µes feitas, pode-se acessar os arquivos na pasta [workflows](./.github/workflows/).

## Como executar

### Testes

#### Pr√©-requisitos

Instalar as depend√™ncias do projeto.

```bash
pnpm install
```

#### Unit√°rios

```bash
pnpm run test
```

#### Cobertura

Ser√° gerado um relat√≥rio no terminal, assim como um arquivo `index.html` dentro da pasta `./coverage/index.html` que poder√° ser aberto para uma vis√£o mais ampla.

```bash
pnpm run test:coverage
```

### Linters

A execu√ß√£o dos `linters` podem ser aplicados automaticamente dependendo da configura√ß√£o do seu editor de c√≥digo, ao salvar um arquivo, por exemplo, no `VSCODE`.
Mas se caso desejar executar via comando poder√° executar os seguintes:

#### Eslint

```bash
pnpm run lint:fix
```

#### Prettier

```bash
pnpm run prettier:format
```

### Localmente

#### Pr√©-requisitos

- Instalar as depend√™ncias do projeto.
- A API e o banco de dados devem estar em execu√ß√£o.

```bash
pnpm install
```

Configure previamente as vari√°veis de ambiente criando um arquivo `.env` na raiz do projeto. √â poss√≠vel obter o nome das vari√°veis a serem definidas, no arquivo `.env.example` contida na pasta raiz do projeto.

```bash
# Futuramente quando o projeto estiver hospedado em uma plataforma, poder√° ser informado o dom√≠nio abaixo
NEXT_PUBLIC_WEBSITE_URL=

# Atualmente no package.json est√° definido fixadamente a porta 4000 devido a incompatibilidades. Futuramente essa vari√°vel ser√° utilizada
NEXT_PUBLIC_PORT=

# Informe um termo para o secret do token da API
NEXT_PUBLIC_JWT_SECRET=

# Informe a url da API
NEXT_PUBLIC_DINAMIQUES_API=http://localhost:3000/api/v1
```

A API e o banco de dados estando em execu√ß√£o, basta executar:

```bash
pnpm dev
```

#### Desenvolvimento com hot reload

Atualizar a vari√°vel de ambiente no arquivo `.env`.

```bash
NEXT_PUBLIC_DINAMIQUES_API=http://host.docker.internal:3000/api/v1
```

```bash
docker-compose up web-dev
```

#### Produ√ß√£o

Atualizar a vari√°vel de ambiente no arquivo `.env`.

```bash
NEXT_PUBLIC_DINAMIQUES_API=http://host.docker.internal:3000/api/v1
```

```bash
docker-compose up web-prod
```

Se houver algum problema com alguma cria√ß√£o anterior do container do docker, basta executar o comando abaixo, antes de executar o `docker-compose up web-prod --build` ou `docker-compose up web-dev --build`.

```bash
docker-compose down
```

#### Autentica√ß√£o com usu√°rio padr√£o

Como a rota de cria√ß√£o de usu√°rio √© protegida com autentica√ß√£o, foi criado um usu√°rio padr√£o para que seja poss√≠vel se autenticar e acessar demais recursos. Segue abaixo os dados do usu√°rio para autentica√ß√£o inicial.

```json
{
  "email": "leticia.pereira@dinamiques.com.br",
  "password": "admin"
}
```

## Tecnologias

- [Docker](https://www.docker.com/)
- [CI/CD: GitHubActions](https://docs.github.com/pt/actions)
- [Next.js](https://nextjs.org/)
- [React](https://react.dev/)
- [ReactHookForm](https://react-hook-form.com/)
- [ReactMarkdown](https://github.com/remarkjs/react-markdown)
- [ReactColorful](https://omgovich.github.io/react-colorful/)
- [Typescript](https://www.typescriptlang.org/)
- [JWT](https://jwt.io/)
- [ESLint](https://eslint.org/)
- [Prettier](https://prettier.io/)
- [CommitLint](https://commitlint.js.org/)
- [LintStaged](https://github.com/lint-staged/lint-staged)
- [Husky](https://typicode.github.io/husky/)
- [Vitest](https://vitest.dev/)
- [TestingLibrary](https://testing-library.com/)
- [Tailwind](https://tailwindcss.com/)
- [ClassVarianceAuthority](https://cva.style/docs)
- [CLSX](https://www.npmjs.com/package/clsx)
- [RadixUI](https://www.radix-ui.com/)
- [Tanstack](https://tanstack.com/)
- [UIWReactMdEditor](https://uiwjs.github.io/npm-unpkg/#/pkg/@uiw/react-md-editor/file/README.md)
- [DateFns](https://date-fns.org/)
- [Zod](https://zod.dev/)
- [Heroicons](https://heroicons.com/)
- [JSdom](https://github.com/jsdom/jsdom)
- [PostCSS](https://postcss.org/)
- [Google: Lighthouse](https://chromewebstore.google.com/detail/lighthouse/blipmdconlkpinefehnmjammfjpmpbjk?hl=pt-br)
- [Google: RichResultsTest](https://search.google.com/test/rich-results?hl=pt-BR)

> **DICA !**
>
> Todas as demais depend√™ncias utilizadas podem ser visualizados acessando o [package.json](./package.json).

## Autor

<table>
  <tr>
    <td align="center">
      <a href="https://github.com/felipe-dr">
        <img style="border-radius: 50%;" src="https://avatars.githubusercontent.com/u/62888625?s=96&v=4" width="100px;" alt="Avatar do autor" />
        <br />
        <sub>
          <b>Felipe DR</b>
        </sub>
      </a>
      <br />
      <a href="mailto:felipe.corp7@gmail.com" title="E-mail">üì©</a>
    </td>
  </tr>
</table>
